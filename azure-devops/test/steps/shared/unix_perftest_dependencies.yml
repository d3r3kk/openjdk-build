steps:
  - bash: |
      echo "##vso[task.setvariable variable=PERF_ROOT]$(Common.TestResultsDirectory)/openjdk-tests/perf/liberty"
    displayName: "unix perftest dependencies: set PERF_ROOT"

  - bash: |
      URI_PREFIX=https://buildreqs.blob.core.windows.net/perftest
      mkdir -p $(Common.TestResultsDirectory)/openjdk-tests/perf/liberty/libertyBinaries
      mkdir -p $(Common.TestResultsDirectory)/openjdk-tests/test-result/perf/liberty/libertyBinaries/openliberty-19.0.0.4/usr/shared/apps/webcontainer
      mkdir -p $(Common.TestResultsDirectory)/openjdk-tests/test-result/perf/liberty/libertyBinaries/openliberty-19.0.0.4/openliberty-19.0.0.4/usr/shared/resources/derby
      wget -O $(Common.TestResultsDirectory)/openjdk-tests/perf/liberty/libertyBinaries/openliberty-19.0.0.4.zip ${URI_PREFIX}/openliberty-19.0.0.4.zip
      wget -O $(Common.TestResultsDirectory)/openjdk-tests/test-result/perf/liberty/libertyBinaries/openliberty-19.0.0.4/usr/shared/apps/webcontainer/daytrader-ee7.ear ${URI_PREFIX}/daytrader-ee7.ear
      wget -O $(Common.TestResultsDirectory)/openjdk-tests/test-result/perf/liberty/libertyBinaries/openliberty-19.0.0.4/openliberty-19.0.0.4/usr/shared/resources/derby/derby.jar ${URI_PREFIX}/derby.jar
    displayName: "unix perftest dependencies: download perftest dependencies from blob storage"
