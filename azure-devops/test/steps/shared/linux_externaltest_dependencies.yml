parameters:
  containerRegistryUri: "junipercontainerregistry.azurecr.io"
  containerRegistry: "juniper-container-registry"
  repository: "azure-devops-pipeline"

steps:
  - bash: |
      echo "##vso[task.setvariable variable=JVM_VERSION]${{ parameters.repository }}"
      echo "##vso[task.setvariable variable=DOCKERIMAGE_TAG]centos6-${{ parameters.javaVersion }}-$(Build.BuildNumber)"
    displayName: "linux externaltest dependencies: set JVM_VERSION, DOCKERIMAGE_TAG"

  - task: Docker@2
    inputs:
      containerRegistry: ${{ parameters.containerRegistry }}
      repository: ${{ parameters.repository }}
      command: "login"
      tags: "centos6-${{ parameters.javaVersion }}-$(Build.BuildNumber)"
    displayName: "linux externaltest dependencies: docker login"

  - bash: |
      docker pull "${{ parameters.containerRegistryUri }}/${{ parameters.repository }}:${DOCKERIMAGE_TAG}"
    displayName: "linux externaltest dependencies: docker pull"